---
title: "ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•µì‹¬ ê°œë…ê³¼ ë¡œê·¸ì¸ êµ¬í˜„ ê°€ì´ë“œ: 1ë¶€ - ì•„í‚¤í…ì²˜ì™€ ê¸°ë³¸ ê°œë…"
categories:
  - Spring Security
tags:
  - Spring Security
  - Authentication
  - Authorization
last_modified_at:
---
#### ğŸ“Œ ìš©ì–´ ì„¤ëª…
- ìŠ¤í”„ë§ ì‹œíë¦¬í‹°: ìŠ¤í”„ë§ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ í”„ë ˆì„ì›Œí¬. ì¸ì¦ê³¼ ì¸ê°€ ì²˜ë¦¬
- ì¸ì¦(Authentication): ì‚¬ìš©ì ì‹ ì› í™•ì¸. ë¡œê·¸ì¸ ì—¬ë¶€ íŒë‹¨
- ì¸ê°€(Authorization): ì‚¬ìš©ì ê¶Œí•œ í™•ì¸. íŠ¹ì • ìì› ì ‘ê·¼ í—ˆìš© ì—¬ë¶€ íŒë‹¨
- Principal: ì¸ì¦ëœ ì‚¬ìš©ì ì •ë³´. ì£¼ë¡œ ì‚¬ìš©ì IDë‚˜ ê°ì²´
- Credential: ì‚¬ìš©ì ì¸ì¦ ì •ë³´. ì£¼ë¡œ ë¹„ë°€ë²ˆí˜¸
- SecurityContextHolder: ë³´ì•ˆ ì •ë³´ ì €ì¥ì†Œ. í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ìœ ì§€
- SecurityContext: SecurityContextHolder ë‚´ë¶€ì˜ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸. ì¸ì¦ ì •ë³´ ê´€ë¦¬
- GrantedAuthority: ì‚¬ìš©ì ê¶Œí•œ. ì—­í• (Role)ì´ë‚˜ ê¶Œí•œ(Permission) í‘œí˜„

---
#### ğŸ“Œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
1. ê°•ë ¥í•œ ë³´ì•ˆ ê¸°ëŠ¥ ì œê³µ. ì¸ì¦ê³¼ ì¸ê°€ í†µí•© ê´€ë¦¬
2. ìœ ì—°í•œ ì»¤ìŠ¤í„°ë§ˆì´ì§•. ë‹¤ì–‘í•œ ì¸ì¦ ë°©ì‹ ì§€ì›
3. í•„í„° ê¸°ë°˜ ì•„í‚¤í…ì²˜. ì„œë¸”ë¦¿ í•„í„°ì™€ í†µí•©
4. ìŠ¤í”„ë§ ìƒíƒœê³„ í˜¸í™˜. ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ì‰¬ìš´ ì„¤ì •
5. ë³´ì•ˆ ì·¨ì•½ì  ë°©ì–´. CSRF, XSS, ì„¸ì…˜ ê´€ë¦¬ ì§€ì›

---
#### ğŸ“Œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì•„í‚¤í…ì²˜ ê°œìš”
ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” í•„í„° ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¡œ ë™ì‘
HTTP ìš”ì²­ë§ˆë‹¤ ë³´ì•ˆ í•„í„° ì²´ì¸ì„ ê±°ì³ ì¸ì¦ê³¼ ì¸ê°€ ì²˜ë¦¬
ì£¼ìš” êµ¬ì„± ìš”ì†Œ:
1. DelegatingFilterProxy: ìŠ¤í”„ë§ ë¹ˆì„ ì„œë¸”ë¦¿ í•„í„°ì— ì—°ê²°. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì™€ ì„œë¸”ë¦¿ í†µí•©
2. FilterChainProxy: ì‹¤ì œ ë³´ì•ˆ í•„í„° ì²´ì¸ ê´€ë¦¬. ì—¬ëŸ¬ SecurityFilterChain ì‹¤í–‰
3. SecurityFilterChain: íŠ¹ì • URL íŒ¨í„´ì— ì ìš©ë˜ëŠ” í•„í„° ëª©ë¡. ë³´ì•ˆ ê·œì¹™ ì •ì˜
4. AuthenticationManager: ì¸ì¦ ìš”ì²­ ì²˜ë¦¬. ProviderManagerë¡œ êµ¬í˜„
5. ProviderManager: ì—¬ëŸ¬ AuthenticationProvider ê´€ë¦¬. ì¸ì¦ ë°©ì‹ ì„ íƒ
6. AuthenticationProvider: íŠ¹ì • ì¸ì¦ ë¡œì§ ì²˜ë¦¬. ì‚¬ìš©ì ì¸ì¦ ìˆ˜í–‰
7. UserDetailsService: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ. ì¸ì¦ì— í•„ìš”í•œ ë°ì´í„° ì œê³µ

---
#### ğŸ“Œ í•µì‹¬ ê°œë… ìƒì„¸
##### 1. ì¸ì¦ê³¼ ì¸ê°€
- ì¸ì¦: ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ í™•ì¸. IDì™€ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
- ì¸ê°€: ì¸ì¦ëœ ì‚¬ìš©ìì˜ ê¶Œí•œ í™•ì¸. ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ì œì–´
- ì˜ˆ: ë¡œê·¸ì¸(ì¸ì¦) í›„ ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼(ì¸ê°€) íŒë‹¨

##### 2. Principalê³¼ Credential
- Principal: ì¸ì¦ ì£¼ì²´. UserDetails ê°ì²´ë¡œ í‘œí˜„
- Credential: ì¸ì¦ì— í•„ìš”í•œ ìê²© ì¦ëª…. ë¹„ë°€ë²ˆí˜¸ë‚˜ í† í°
- ì˜ˆ: ë¡œê·¸ì¸ ì‹œ ID(Principal)ì™€ ë¹„ë°€ë²ˆí˜¸(Credential) ì…ë ¥

##### 3. UserDetailsService
- ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì¸í„°í˜ì´ìŠ¤
- loadUserByUsername ë©”ì„œë“œë¡œ ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
- DB, LDAP ë“±ì—ì„œ ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
- ì˜ˆ: JPAë¡œ DBì—ì„œ ì‚¬ìš©ì ì¡°íšŒ í›„ UserDetails ê°ì²´ ìƒì„±

##### 4. SecurityContextHolderì™€ SecurityContext
- SecurityContextHolder: í˜„ì¬ ìŠ¤ë ˆë“œì˜ ë³´ì•ˆ ì •ë³´ ì €ì¥. ThreadLocal ê¸°ë°˜
- SecurityContext: ì¸ì¦ ì •ë³´(Authentication ê°ì²´) ì €ì¥
- í™œìš©: SecurityContextHolder.getContext().getAuthentication()ìœ¼ë¡œ í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì ‘ê·¼
- ì˜ˆ: ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í˜„ì¬ ì‚¬ìš©ì ì´ë¦„ ì¡°íšŒ

##### 5. Authentication
- ì¸ì¦ ê²°ê³¼ ì €ì¥ ê°ì²´
- Principal, Credential, GrantedAuthority í¬í•¨
- ì¸ì¦ ì„±ê³µ ì‹œ SecurityContextì— ì €ì¥
- ì˜ˆ: UsernamePasswordAuthenticationTokenìœ¼ë¡œ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ í‘œí˜„

##### 6. GrantedAuthority
- ì‚¬ìš©ì ê¶Œí•œ í‘œí˜„
- getAuthority ë©”ì„œë“œë¡œ ê¶Œí•œ ë¬¸ìì—´ ë°˜í™˜
- ì˜ˆ: ROLE_USER, ROLE_ADMIN ê°™ì€ ì—­í•  ì •ì˜

##### 7. AuthenticationManagerì™€ ProviderManager
- AuthenticationManager: ì¸ì¦ ìš”ì²­ ì²˜ë¦¬ ì¸í„°í˜ì´ìŠ¤
- ProviderManager: ì—¬ëŸ¬ AuthenticationProvider ê´€ë¦¬
- ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì˜ˆì™¸(AuthenticationException) ë°œìƒ
- ì˜ˆ: ProviderManagerê°€ DB, LDAP ì¸ì¦ ë°©ì‹ ìˆœì°¨ ì²˜ë¦¬

##### 8. AuthenticationProvider
- íŠ¹ì • ì¸ì¦ ë°©ì‹ ì²˜ë¦¬
- supports ë©”ì„œë“œë¡œ ì²˜ë¦¬ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
- authenticate ë©”ì„œë“œë¡œ ì¸ì¦ ìˆ˜í–‰
- ì˜ˆ: DaoAuthenticationProviderëŠ” DB ê¸°ë°˜ ì¸ì¦ ì²˜ë¦¬

---
#### ğŸ“Œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì • ì˜ˆì œ
ê¸°ë³¸ì ì¸ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì •
```java
// ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì„¤ì •
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    // SecurityFilterChain Bean ì •ì˜
    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
            // HTTP ìš”ì²­ ê¶Œí•œ ì„¤ì •
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/public/**").permitAll() // ê³µê°œ ê²½ë¡œ í—ˆìš©
                .anyRequest().authenticated() // ë‚˜ë¨¸ì§€ ìš”ì²­ ì¸ì¦ í•„ìš”
            )
            // í¼ ë¡œê·¸ì¸ ì„¤ì •
            .formLogin(form -> form
                .loginPage("/login") // ë¡œê·¸ì¸ í˜ì´ì§€ ì„¤ì •
                .permitAll() // ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ê·¼ í—ˆìš©
            );
        return http.build();
    }

    // UserDetailsService Bean ì •ì˜
    @Bean
    public UserDetailsService userDetailsService() {
        // ì‚¬ìš©ì ì •ë³´ ìƒì„±
        UserDetails user = User.withUsername("user")
            .password("{noop}password") // ë¹„ë°€ë²ˆí˜¸ í‰ë¬¸ ì €ì¥
            .roles("USER") // ì‚¬ìš©ì ì—­í•  ì„¤ì •
            .build();
        return new InMemoryUserDetailsManager(user); // ë©”ëª¨ë¦¬ ì‚¬ìš©ì ê´€ë¦¬
    }
}

```

ì´ì–´ì„œ "ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•µì‹¬ ê°œë…ê³¼ ë¡œê·¸ì¸ êµ¬í˜„ ê°€ì´ë“œ: 2ë¶€ - í•„í„°ì™€ ì˜ˆì™¸ ì²˜ë¦¬"ì—ì„œ ê³„ì† ì •ë¦¬

#### ğŸ“š ì°¸ê³ ìë£Œ
[ğŸ”—SpringSecurity ê³µì‹ë¬¸ì„œğŸ”—](https://docs.spring.io/spring-security/reference/servlet/index.html)
