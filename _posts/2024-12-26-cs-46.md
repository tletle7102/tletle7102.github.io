---
title: "JPA와 엔티티 매니저, 영속성 컨텍스트, 스냅샷, 더티 체킹의 역할
"
categories:
  - CS Basics
tags:
  - CS Basics
last_modified_at: 
---


### 1. JPA의 역할
**JPA (Java Persistence API)**는 자바 애플리케이션에서 객체 지향적으로 데이터를 다룰 수 있도록 도와주는 표준 API이다. JPA는 데이터베이스와의 상호작용을 단순화하고, 객체와 관계형 데이터베이스 간의 매핑을 관리한다.

#### 실생활 예시:
JPA는 **레시피 책**과 같다. 레시피 책은 요리법(객체)과 식재료(데이터베이스 테이블)를 연결시켜준다. 레시피 책을 통해 요리를 만들 수 있지만, 실제 요리 재료(데이터베이스)와 레시피(객체)를 연결하는 작업은 JPA가 처리한다.

#### 역할:
- 객체와 데이터베이스 테이블 간의 매핑을 처리한다.
- CRUD 작업을 간소화하여 데이터베이스 작업을 쉽게 한다.
- 엔티티 객체의 상태를 관리하고, 데이터베이스와 동기화한다.

---

### 2. 엔티티 매니저(EntityManager)의 역할
**엔티티 매니저(EntityManager)**는 JPA에서 중요한 역할을 하며, 엔티티 객체와 관계형 데이터베이스 간의 상호작용을 담당하는 핵심 클래스이다. 엔티티 매니저는 객체의 상태를 관리하고, 쿼리 실행, 트랜잭션 관리 등을 수행한다.

#### 실생활 예시:
엔티티 매니저는 **레스토랑의 매니저**와 같다. 레스토랑 매니저는 요리사에게 주문을 전달하고, 고객이 먹은 음식에 대한 정보를 기록하며, 전반적인 서비스가 원활히 이루어지도록 한다. 매니저는 레스토랑 내 모든 활동을 관리하며, 요리사(엔티티)와 고객(데이터베이스) 간의 상호작용을 중재한다.

#### 역할:
- 엔티티의 상태를 관리한다.
- 엔티티 객체를 데이터베이스와 연결한다.
- CRUD 작업을 처리한다 (저장, 조회, 수정, 삭제).
- 트랜잭션을 관리한다.

---

### 3. 영속성 컨텍스트(Persistence Context)
영속성 컨텍스트는 엔티티 객체들이 관리되는 환경이다. JPA는 엔티티를 영속성 컨텍스트 내에서 관리하며, 이를 통해 객체의 상태를 추적하고 데이터베이스와 동기화한다. 영속성 컨텍스트는 객체가 데이터베이스에 저장되거나, 변경될 때 자동으로 처리된다.

#### 실생활 예시:
영속성 컨텍스트는 **도서관**과 비슷하다. 도서관에서는 책이 한 번 대출되면 도서관에 있는 책 목록(영속성 컨텍스트)에 추가되고, 대출된 책의 상태를 관리한다. 책을 대출하고 반납할 때마다 도서관 시스템(영속성 컨텍스트)은 책의 상태를 추적한다. 책의 상태가 바뀔 때(대출됨 → 반납됨) 도서관 시스템은 이 변경을 기록하고, 필요에 따라 책을 다른 사용자에게 대출할 수 있도록 한다.

#### 역할:
- 엔티티 객체를 관리하고 상태를 추적한다.
- 영속성 컨텍스트에 있는 객체는 데이터베이스에 있는 것처럼 취급된다.
- 객체의 상태 변경이 데이터베이스와 자동으로 동기화된다.

---

### 4. 스냅샷(Snapshot)
스냅샷은 엔티티 객체의 상태를 저장한 복사본이다. JPA는 엔티티 객체의 초기 상태를 스냅샷으로 저장하고, 이후 객체가 변경될 때 이를 추적한다. 스냅샷은 객체가 수정된 경우, 변경된 부분을 비교하는 데 사용된다.

#### 실생활 예시:
스냅샷은 **사진**과 같다. 사진을 찍으면 현재의 상태가 기록된다. 만약 누군가가 그 사진 속 물건을 바꿔 놓았다면, 원본 사진과 변경된 사진을 비교하여 무엇이 달라졌는지 확인할 수 있다. 이렇게 바뀐 부분만 추적하고 기록하는 방식이다.

#### 역할:
- 객체의 초기 상태를 복사본으로 저장한다.
- 객체의 변경 사항을 추적하여, 데이터베이스에 반영할 때 필요한 변경만 기록한다.

---

### 5. 더티 체킹(Dirty Checking)
더티 체킹은 엔티티 객체가 수정되었는지를 자동으로 확인하는 기능이다. JPA는 엔티티 객체가 영속성 컨텍스트에 있는 동안 객체의 상태를 추적하고, 변경된 사항이 있을 경우 이를 자동으로 데이터베이스에 반영한다.

#### 실생활 예시:
더티 체킹은 **아이의 숙제 검사**와 비슷하다. 아이가 숙제를 제출하면, 부모님은 숙제를 체크하면서 아이가 수정한 부분을 확인하고, 수정된 부분을 반영한다. 부모님은 숙제를 처음에 받은 상태(스냅샷)와 나중에 수정된 상태를 비교하여 변경된 부분을 반영하는 방식이다.

#### 역할:
- 객체의 상태 변경을 자동으로 감지한다.
- 트랜잭션 커밋 시, 변경된 데이터를 데이터베이스에 반영한다.

---

### 요약
- **JPA**: 객체와 데이터베이스의 매핑을 간소화하는 API, 객체 지향적으로 DB와 상호작용할 수 있도록 도와준다.
- **엔티티 매니저**: 엔티티 객체와 데이터베이스 간의 상호작용을 담당하며, CRUD 작업과 트랜잭션 관리한다.
- **영속성 컨텍스트**: 엔티티 객체가 관리되는 환경, 객체 상태 추적과 데이터베이스 동기화가 이루어진다.
- **스냅샷**: 엔티티 객체의 초기 상태를 저장하여, 변경된 부분을 추적하는 데 사용된다.
- **더티 체킹**: 객체의 상태가 변경되었는지 자동으로 확인하고, 변경된 내용을 데이터베이스에 반영하는 기능이 제공된다.
